
#LOOP LEARNING
```{r}
#creates string of LHS events for the loop
TestFrame<-P1_S1_Min1$LHS
#dropNA
TestFrame<-na.omit(TestFrame)

#events column
P1_S1_Min1$events <- NULL


#round time column so that the match will work
P1_S1_Min1$time <- round(ttt$time, 5)

#loop
for(i in 1:length(TestFrame)){
  #i <- 2
  hstrike <- TestFrame[i]
  P1_S1_Min1$events[P1_S1_Min1$time == hstrike] <- "LHS"
}

#To drop columns
# drop <- c("LHS")
# ttt <- ttt[,!colnames(ttt) %in% drop]


table(ttt$events)

```


```{r}
framenames <- read.table("C:\\Users\\thoma\\OneDrive - Murdoch University\\Desktop\\PhD 2021\\Study 2 and 3\\3D Motion Capture\\Output header template.txt",stringsAsFactors = F)
#colnames(texttest) <- framenames
```

#WGSP04 S2
```{r}
txt_dir <- list.dirs("C:\\Users\\thoma\\OneDrive - Murdoch University\\Desktop\\PhD 2021\\Study 2 and 3\\AAADATA\\Participants\\WGSP04\\Session2\\3D MOCAP\\Visual 3D\\")
txt_files <- list.files(txt_dir)

#REMONES .TXT
txt_names <- substr(txt_files,7,nchar(txt_files)-4)

#REMOVE SPACE - CAN REMOVE ONCE FILES HAVE BEEN RENAMED OUT OF VISUAL 3D
txt_names <- gsub("[[:space:]]", "", txt_names)

#EMPTY LIST THAT THE LOOP WILL POPULATE INTO
P4SESSION2 <- list()

#START OF THE 1ST LOOP
for(i in 1:length(txt_files)){
  #i <- 2
  txt<-read.table(paste0(txt_dir,txt_files[i]), blank.lines.skip = F)
  colnames(txt) <- framenames
  #ADDS IN SESSION SPECIFIC DATA
  txt$time <- txt$FRAME/150
  txt$time <- round(txt$time, 5)
  #txt$events <- NULL
  txt$participant <- "P4"
  txt$KM <- 5.3
  txt$BFR <- "NO"
  txt$TYPE <- "SW"
  txt$speed <- "SW"
  txt$AOP <- 0
  txt$min <- as.numeric(txt_names[i])
  txt$min <-txt$min-6
  
  minact<- as.numeric(txt_names[i]) -6

  #CREATES INDIVIDUAL FRAME FOR EACH EVENT MARKER (EG, LHS, RHS, LTO, RTO)
  LEFT_HEEL_STRIKE <- txt$LHS
  LEFT_HEEL_STRIKE<-na.omit(LEFT_HEEL_STRIKE)
  LEFT_HEEL_STRIKE <-round(LEFT_HEEL_STRIKE, 5)
  
  
  LEFT_TOE_OFF <- txt$LTO
  LEFT_TOE_OFF<-na.omit(LEFT_TOE_OFF)
  LEFT_TOE_OFF <-round(LEFT_TOE_OFF, 5)
  
  RIGHT_HEEL_STRIKE <- txt$RHS
  RIGHT_HEEL_STRIKE<-na.omit(RIGHT_HEEL_STRIKE)
  RIGHT_HEEL_STRIKE <-round(RIGHT_HEEL_STRIKE, 5)
  
  RIGHT_TOE_OFF <- txt$RTO
  RIGHT_TOE_OFF<-na.omit(RIGHT_TOE_OFF)
  RIGHT_TOE_OFF <-round(RIGHT_TOE_OFF, 5)
  
  #THIS IS THE START OF THE SECOND LOOP
  
  #MAKE SURE 1) FRAME NAME MATCHES ABOVE 2) EACH LOOP HAS ITS OWN LETTER 3) MAKE SURE YOU RENAME THE EVENT TEXT ("LHS" [EG LINE 135])
      for(j in 1:length(LEFT_HEEL_STRIKE)){
      #j <- 2
      lhstrike <- LEFT_HEEL_STRIKE[j]
      txt$events[txt$time == lhstrike] <- "LHS"
      
      }
  
      for(k in 1:length(LEFT_TOE_OFF)){
      #j <- 2
      ltoff <- LEFT_TOE_OFF[k]
      txt$events[txt$time == ltoff] <- "LTO"
      
      }
  
      for(l in 1:length(RIGHT_HEEL_STRIKE)){
      #j <- 2
      rhstrike <- RIGHT_HEEL_STRIKE[l]
      txt$events[txt$time == rhstrike] <- "RHS"
      
      }
  
      for(m in 1:length(RIGHT_TOE_OFF)){
      #j <- 2
      rtoff <- RIGHT_TOE_OFF[m]
      txt$events[txt$time == rtoff] <- "RTO"
      
      }
  
  #assign(paste0("P4","Trial",txt_names[i]), txt, envir = .GlobalEnv)
  assign(paste0("P4","S2","min",minact),txt, envir = .GlobalEnv)

  P4SESSION2[[i]] <- txt
   #return(listofdfs)
 
}


```







